# Работа с индексами, join'ами, статистикой

>Цель:
>знать и уметь применять основные виды индексов PostgreSQL
>строить и анализировать план выполнения запроса
>уметь оптимизировать запросы для с использованием индексов
>знать и уметь применять различные виды join'ов
>строить и анализировать план выполенения запроса
>оптимизировать запрос
>уметь собирать и анализировать статистику для таблицы
# 1 вариант:
>Создать индексы на БД, которые ускорят доступ к данным.
>В данном задании тренируются навыки:
>определения узких мест
>написания запросов 

Подключаемся к ВМ  
```console
gcloud beta compute ssh --zone "us-central1-a" "instance-2"  --project "clever-muse-328410"
```
Добавляем репозиторий  
```console
yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm
```
Устанавливаем PostgreSQL 14 
```console
yum install -y postgresql14-server
```
Создаем каталог для данных, и меняем права на него
```console
mkdir /mnt/pgdata
chown postgres:postgres /mnt/pgdata
```
Инициализируем и запускаем сервер БД  
```console
/usr/pgsql-14/bin/initdb --locale en_US.UTF-8 -D /mnt/pgdata/14
/usr/pgsql-14/bin/pg_ctl -D /mnt/pgdata/14 start
```
gsutil -m cp gs://my_alex_bucket/taxi/taxi_00000000000*.csv  chicago_taxi_trips


>для создания индекса
>оптимизации Необходимо:
>Создать индекс к какой-либо из таблиц вашей БД
>Прислать текстом результат команды explain, в которой используется данный индекс
>Реализовать индекс для полнотекстового поиска
>Реализовать индекс на часть таблицы или индекс на поле с функцией
>Создать индекс на несколько полей
>Написать комментарии к каждому из индексов
>Описать что и как делали и с какими проблемами столкнулись 
# 2 вариант: 
>В результате выполнения ДЗ вы научитесь пользоваться различными вариантами соединения таблиц. В данном задании тренируются навыки:
>написания запросов с различными типами соединений Необходимо:
>Реализовать прямое соединение двух или более таблиц
>Реализовать левостороннее (или правостороннее) соединение двух или более таблиц
>Реализовать кросс соединение двух или более таблиц
>Реализовать полное соединение двух или более таблиц
>Реализовать запрос, в котором будут использованы разные типы соединений
>Сделать комментарии на каждый запрос
>К работе приложить структуру таблиц, для которых выполнялись соединения
>Придумайте 3 своих метрики на основе показанных представлений, отправьте их через ЛК, а так же поделитесь с коллегами в слаке
